let opts={seperator:".",comma:",",equal:"=",arrayMap:"*",pipe:"|"};const dig=function(e,t,i=opts){if(!e||!t)return null;if("object"==typeof t){if(Array.isArray(t))return t.map(t=>dig(e,t));const i=Object.keys(t),o={};for(const n of i)o[n]=dig(e,t[n]);return o}let o=e,n=t.split(i.seperator);for(let e=0;e<n.length;e+=1){const t=n[e];if(-1!==t.indexOf(i.pipe)){const e=t.split(i.pipe);let n=null;for(const t of e)if(n=dig(o,t))break;o=n}else if(-1!==t.indexOf(i.comma)){const e=t.split(i.comma),n={};for(const t of e)n[t]=dig(o,t);o=n}else if(-1!==t.indexOf(i.equal)){const e=t.split(i.equal),n=e[0],s=e[1];o=o.find(e=>n?e[n]==s:e==s)}else t===i.arrayMap?(e+=1,o=o.map(t=>dig(t,n.slice(e)[0]))):o=o[t];if(null==o||null==o)return null}return o};module.exports={dig:dig,setOptions:function(e){Object.assign(opts,e)}};